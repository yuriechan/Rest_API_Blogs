# Blogs API, for you to Create, Read, Update, and Delete blogs. 


## Project setup 

### Part 1 (Test on hosted website, no need for setup 1.5)
- Use *https://cool-blog-api.herokuapp.com* to test the available endpoints

### Part 1.5 (Test on local)
- Get the necessary credentials from the owner of this repo via Slack.
- Paste these credentials on the following TWO files.
1. `sample-yurie-s-api-firebase-adminsdk-l0y9d-d3907685b0.json` ---> should be renamed to ---> `yurie-s-api-firebase-adminsdk-l0y9d-d3907685b0.json`
2. `.env.sample` ---> should be renamed to ---> `.env`

### Part 2
- Import `/postman/Blog-REST-API.postman_collection.json` to Postman before testing this API. <br> (Collection is configured for you, to test all the available endpoints.)
- `git clone` to clone this repository. Alternatively, download the source code.
- `cd HomeWork/Week6/YurieEgawa` to navigate to the root of this repository.
- `npm install` to install required dependencies.
- `npm run start`to run server.

## Available Endpoints 
- **POST** `/login` --- *User authentication with JWT*
- Please use the below credential to test this endpoint. 

Key | Value | Request type 
------------ | ------------- | -------------
email | guest @ test.com (No space needed before and after @) | Body Params (x-www-form-urlencoded)
password | keepitsecret | Body Params (x-www-form-urlencoded)

- After successful Login, you will be grated a token to proceed on other endpoints. 
```
Sample response

{
    "status": 200,
    "message": "Auth Success.",
    "token": "yourValidToken"
}
```

- **GET** `/blogs` --- *List all blogs available*
- Please use the granted token to see expected results.
- Post your token inside Postman as below.

Key | Value | Request type 
------------ | ------------- | ------------- 
Authorization | Bearer yourValidToken (Need one space between `Bearer` and `yourValidToken`) | Header Params

- **GET** `/blogs/:id` --- *Get a single blog post by ID*
- Please use the granted token to see expected results. 

```
Sample request
http://localhost:3000/blogs/weofiwunaos
```

- **POST** `blogs/create` --- *Create a single blog post*
- Please use the granted token to see expected results.

Key | Value | Request type 
------------ | ------------- | -------------
title | `String` | Body Params (x-www-form-urlencoded)
content | `String` | Body Params (x-www-form-urlencoded)


- **DEL** `blogs/delete/:id` --- *Delete a single blog post by ID*
- Please use the granted token to see expected results.

```
Sample request
http://localhost:3000/blogs/weofiwunaos
```

- **PUT** `blogs/update/:id` --- *Update a single blog post by ID*
- Please use the granted token to see expected results.

Key | Value | Request type 
------------ | ------------- | -------------
title | `String` | Body Params (x-www-form-urlencoded)
content | `String` | Body Params (x-www-form-urlencoded)

## Database Schema, NoSQL
```
blogs (Table) : {
  uid (row) : {
     id: string,
     title: string,
     content: string,
     created_at: string,
     modified_at: string
  },
  uid : {
    ....
  },
  ....
}

uid = Autogenerated unique ID 
```

## Run unit tests
- Kill express server, if running. 
- For `/login` endpoint, you will need `LOGIN_EMAIL` and `LOGIN_PASSWORD` set inside `.env` file. 
- Alternatively, replace `LOGIN_EMAIL` and `LOGIN_PASSWORD` env variables with guest email/password pasted above in the documentation. 
- Inside the root, `HomeWork/Week6/YurieEgawa/`
- Run `npm run test`


## Things to Improve 
- Add optional features such as, converting `\n` with `<br />`, to allow rendering in HTML in proper format 
- Write unit tests using [Google Firebase Emulator](https://firebase.google.com/docs/functions/local-emulator) to test function with HTTP requests/response 
